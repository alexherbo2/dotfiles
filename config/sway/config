# Options ──────────────────────────────────────────────────────────────────────

font pango:DejaVu
gaps inner 10
default_border pixel
default_floating_border normal
floating_modifier Mod4
workspace_auto_back_and_forth yes
input type:keyboard xkb_file ~/repositories/github.com/fabi1cazenave/qwerty-lafayette/dist/qwerty-l.xkb
output * bg ~/images/wallpapers/orioto/DKC.jpg fill
exec_always {
  pkill waybar; waybar
  pkill kanshi; kanshi
}

# Colors ───────────────────────────────────────────────────────────────────────

# Default
# Mac
# Dracula
# https://draculatheme.com
set {
  $black #202020
  $red #ff5555
  $blue #2e9ef4
  $white #eaeaea
}

# Color class | Border | Background | Text | Indicator | Child border
client.focused $white $white $black $blue $white
client.focused_inactive $black $black $white $black $black
client.unfocused $black $black $white $black $black
client.urgent $red $red $white $black $red
client.placeholder $black $black $white $black $black
client.background $white

# Bar ──────────────────────────────────────────────────────────────────────────

bar {
  position top
  status_command waybar
  colors {
    background $white
    statusline $black
    separator $white
    # Color class | Border | Background | Text
    focused_workspace $black $black $white
    active_workspace $black $black $white
    inactive_workspace $white $white $black
    urgent_workspace $red $red $white
    binding_mode $black $black $white
  }
}

# Key-bindings ─────────────────────────────────────────────────────────────────

bindsym --to-code {

  # Plumb
  Mod4+q exec plumb mpv pandoc xdg-open

  # Terminal
  Mod4+Return exec alacritty

  # Launcher
  Mod4+Shift+Return exec launcher $(launcher | rofi -dmenu -i -p Launcher)

  # Mouse
  --release button2 kill
  --release button3 exec alacritty

  --whole-window Mod4+button4 focus left
  --whole-window Mod4+button5 focus right
  --whole-window Mod4+Shift+button4 move left
  --whole-window Mod4+Shift+button5 move right

  # Layouts
  Mod4+a layout tabbed
  Mod4+s layout stacking
  Mod4+d layout toggle split
  Mod4+f fullscreen toggle
  Mod4+x sticky toggle

  # Distraction-free
  Mod4+Shift+d bar mode dock
  Mod4+Shift+f bar mode invisible

  # Tiling / Floating
  Mod4+Shift+space floating toggle
  Mod4+space focus mode_toggle

  # Reload
  Mod4+Escape reload
  Mod4+Shift+Escape restart

  # Screen locker
  Mod4+BackSpace exec swaylock

  # Containers ─────────────────────────────────────────────────────────────────

  # Kill
  Mod4+w kill

  # Split
  Mod4+o split vertical
  Mod4+Shift+o split horizontal

  # Parent / Child
  Mod4+u focus parent
  Mod4+i focus child

  # Focus
  Mod4+h focus left
  Mod4+j focus down
  Mod4+k focus up
  Mod4+l focus right

  # Move
  Mod4+Shift+h move left
  Mod4+Shift+j move down
  Mod4+Shift+k move up
  Mod4+Shift+l move right

  # Resize in these directions
  # ╭────╮ →
  # │    │ →
  # │    │ →
  # │    │ →
  # ╰────╯ →
  # ↓ ↓ ↓  ↘
  Mod4+Control+h resize shrink right 5 ppt
  Mod4+Control+j resize grow down 5 ppt
  Mod4+Control+k resize shrink down 5 ppt
  Mod4+Control+l resize grow right 5 ppt

  # Gaps
  Mod4+g exec sh -c 'swaymsg gaps inner current set "${1:-0}", gaps outer current set "${2:-0}"' -- $(rofi -dmenu -p Gaps)
  Mod4+Shift+g gaps inner current set 0, gaps outer current set 0

  # Borders
  Mod4+b border toggle
  Mod4+Shift+b border pixel

  # Search
  Mod4+slash exec sway-commander rofi -dmenu -i -p 'Search window'
  Mod4+Shift+slash exec echo move workspace current, focus | sway-commander rofi -dmenu -i -p 'Bring window'

  # Marks
  Mod4+m exec swaymsg mark $(rofi -dmenu -p Mark)

  # Workspaces ─────────────────────────────────────────────────────────────────

  # Next / Previous
  Mod4+n workspace next
  Mod4+Shift+n workspace prev

  # Last
  Mod4+Tab workspace back_and_forth
  Mod4+Shift+Tab move container to workspace back_and_forth

  # Focus
  Mod4+grave scratchpad show
  Mod4+1 workspace number 1
  Mod4+2 workspace number 2
  Mod4+3 workspace number 3
  Mod4+4 workspace number 4
  Mod4+5 workspace number 5
  Mod4+6 workspace number 6
  Mod4+7 workspace number 7
  Mod4+8 workspace number 8
  Mod4+9 workspace number 9
  Mod4+0 workspace number 10
  Mod4+minus workspace number 11
  Mod4+equal workspace number 12

  # Move
  Mod4+Shift+grave move scratchpad
  Mod4+Shift+1 move container to workspace number 1
  Mod4+Shift+2 move container to workspace number 2
  Mod4+Shift+3 move container to workspace number 3
  Mod4+Shift+4 move container to workspace number 4
  Mod4+Shift+5 move container to workspace number 5
  Mod4+Shift+6 move container to workspace number 6
  Mod4+Shift+7 move container to workspace number 7
  Mod4+Shift+8 move container to workspace number 8
  Mod4+Shift+9 move container to workspace number 9
  Mod4+Shift+0 move container to workspace number 10
  Mod4+Shift+minus move container to workspace number 11
  Mod4+Shift+equal move container to workspace number 12

  # Rename workspace
  Mod4+r exec swaymsg rename workspace to $(rofi -dmenu -p 'Workspace name')

  # Desktop ────────────────────────────────────────────────────────────────────

  # Room
  Mod4+F2 exec room

  # Password manager
  Mod4+p exec password-get $(password-menu | rofi -dmenu -i -p Password) | wl-copy

  # Screenshots
  Print exec grim-window $(new-file).webp
  Shift+Print exec grim-output $(new-file).webp

  # Multimedia-keys ────────────────────────────────────────────────────────────

  XF86AudioMute exec amixer set Master toggle
  XF86AudioRaiseVolume exec amixer set Master 5%+
  XF86AudioLowerVolume exec amixer set Master 5%-

  XF86AudioPlay exec echo cycle pause | socat - "$XDG_CONFIG_HOME/mpv/socket"
  XF86AudioPause exec echo cycle pause | socat - "$XDG_CONFIG_HOME/mpv/socket"
  XF86AudioNext exec echo playlist-next | socat - "$XDG_CONFIG_HOME/mpv/socket"
  XF86AudioPrev exec echo playlist-prev | socat - "$XDG_CONFIG_HOME/mpv/socket"
}

# Rules ────────────────────────────────────────────────────────────────────────

for_window [app_id=alacritty-float] exec 640px
