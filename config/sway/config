# Key codes ────────────────────────────────────────────────────────────────────

# Generated with xev or wev using KeyboardEvent.code as names.
# https://gitlab.freedesktop.org/xorg/app/xev
# https://git.sr.ht/~sircmpwn/wev
# https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/code

set $Backquote 49
set $Digit1 10
set $Digit2 11
set $Digit3 12
set $Digit4 13
set $Digit5 14
set $Digit6 15
set $Digit7 16
set $Digit8 17
set $Digit9 18
set $Digit0 19
set $Minus 20
set $Equal 21
set $KeyQ 24
set $KeyW 25
set $KeyE 26
set $KeyR 27
set $KeyT 28
set $KeyY 29
set $KeyU 30
set $KeyI 31
set $KeyO 32
set $KeyP 33
set $BracketLeft 34
set $BracketRight 35
set $Backslash 51
set $KeyA 38
set $KeyS 39
set $KeyD 40
set $KeyF 41
set $KeyG 42
set $KeyH 43
set $KeyJ 44
set $KeyK 45
set $KeyL 46
set $Semicolon 47
set $Quote 48
set $KeyZ 52
set $KeyX 53
set $KeyC 54
set $KeyV 55
set $KeyB 56
set $KeyN 57
set $KeyM 58
set $Comma 59
set $Period 60
set $Slash 61

# Options ──────────────────────────────────────────────────────────────────────

font pango:DejaVu
gaps inner 10
default_border pixel
default_floating_border normal
floating_modifier Mod4
workspace_auto_back_and_forth yes
output * bg ~/images/wallpapers/orioto/DKC.jpg fill
exec_always pkill waybar; waybar
exec_always pkill kanshi; kanshi

# Colors ───────────────────────────────────────────────────────────────────────

# Default
# Mac
# Dracula
# https://draculatheme.com
set $black #202020
set $red #ff5555
set $blue #2e9ef4
set $white #eaeaea

# Color class | Border | Background | Text | Indicator | Child border
client.focused $white $white $black $blue $white
client.focused_inactive $black $black $white $black $black
client.unfocused $black $black $white $black $black
client.urgent $red $red $white $black $red
client.placeholder $black $black $white $black $black
client.background $white

# Bar ──────────────────────────────────────────────────────────────────────────

bar {
  position top
  status_command waybar
  colors {
    background $white
    statusline $black
    separator $white
    # Color class | Border | Background | Text
    focused_workspace $black $black $white
    active_workspace $black $black $white
    inactive_workspace $white $white $black
    urgent_workspace $red $red $white
    binding_mode $black $black $white
  }
}

# Key-bindings ─────────────────────────────────────────────────────────────────

# Plumb
bindcode Mod4+$KeyQ exec plumb mpv pandoc xdg-open

# Terminal
bindsym Mod4+Return exec alacritty

# Launcher
bindsym Mod4+Shift+Return exec launcher $(launcher | rofi -dmenu -i -p Launcher)

# Mouse
bindsym --release button2 kill
bindsym --release button3 exec alacritty

bindsym --whole-window Mod4+button4 focus left
bindsym --whole-window Mod4+button5 focus right
bindsym --whole-window Mod4+Shift+button4 move left
bindsym --whole-window Mod4+Shift+button5 move right

# Layouts
bindcode Mod4+$KeyA layout tabbed
bindcode Mod4+$KeyS layout stacking
bindcode Mod4+$KeyD layout toggle split
bindcode Mod4+$KeyF fullscreen toggle
bindsym Mod4+Mod1+space sticky toggle

# Distraction-free
bindcode Mod4+Shift+$KeyD bar mode dock
bindcode Mod4+Shift+$KeyF bar mode invisible

# Tiling / Floating
bindsym Mod4+Shift+space floating toggle
bindsym Mod4+space focus mode_toggle

# Reload
bindsym Mod4+Escape reload
bindsym Mod4+Shift+Escape restart

# Containers ───────────────────────────────────────────────────────────────────

# Kill
bindcode Mod4+$KeyW kill

# Split
bindcode Mod4+$KeyO split vertical
bindcode Mod4+Shift+$KeyO split horizontal

# Parent / Child
bindcode Mod4+$KeyU focus parent
bindcode Mod4+$KeyI focus child

# Focus
bindcode Mod4+$KeyH focus left
bindcode Mod4+$KeyJ focus down
bindcode Mod4+$KeyK focus up
bindcode Mod4+$KeyL focus right

# Move
bindcode Mod4+Shift+$KeyH move left
bindcode Mod4+Shift+$KeyJ move down
bindcode Mod4+Shift+$KeyK move up
bindcode Mod4+Shift+$KeyL move right

# Swap
bindcode Mod4+$KeyY swap container with mark marked

# Resize in these directions
# ╭────╮ →
# │    │ →
# │    │ →
# │    │ →
# ╰────╯ →
# ↓ ↓ ↓  ↘
bindcode Mod4+Control+$KeyH resize shrink right 5 ppt
bindcode Mod4+Control+$KeyJ resize grow down 5 ppt
bindcode Mod4+Control+$KeyK resize shrink down 5 ppt
bindcode Mod4+Control+$KeyL resize grow right 5 ppt

# Gaps
bindcode Mod4+$KeyG exec "$(printf 'swaymsg gaps inner current set %d, gaps outer current set %d' $(rofi -dmenu -p Gaps))"
bindcode Mod4+Shift+$KeyG gaps inner current set 0, gaps outer current set 0

# Borders
bindcode Mod4+$KeyB border toggle
bindcode Mod4+Shift+$KeyB border pixel

# Search
bindcode Mod4+$Slash exec sway-commander rofi -dmenu -i -p 'Search window'
bindcode Mod4+Shift+$Slash exec echo move workspace current, focus | sway-commander rofi -dmenu -i -p 'Bring window'

# Marks
bindcode Mod4+$KeyX mark --add --toggle marked
bindcode Mod4+Shift+$KeyM exec swaymsg mark $(rofi -dmenu -p Mark)
bindcode Mod4+$KeyM exec swaymsg [con_mark = '"'$(swaymsg -t get_marks | jq --raw-output .[] | rofi -dmenu -i -p 'Focus mark')'"'] focus

# Workspaces ───────────────────────────────────────────────────────────────────

# Next / Previous
bindcode Mod4+$KeyN workspace next
bindcode Mod4+Shift+$KeyN workspace prev

# Last
bindsym Mod4+Tab workspace back_and_forth
bindsym Mod4+Shift+Tab move container to workspace back_and_forth

# Focus
bindcode Mod4+$Backquote scratchpad show
bindcode Mod4+$Digit1 workspace number 1
bindcode Mod4+$Digit2 workspace number 2
bindcode Mod4+$Digit3 workspace number 3
bindcode Mod4+$Digit4 workspace number 4
bindcode Mod4+$Digit5 workspace number 5
bindcode Mod4+$Digit6 workspace number 6
bindcode Mod4+$Digit7 workspace number 7
bindcode Mod4+$Digit8 workspace number 8
bindcode Mod4+$Digit9 workspace number 9
bindcode Mod4+$Digit0 workspace number 10
bindcode Mod4+$Minus workspace number 11
bindcode Mod4+$Equal workspace number 12

# Move
bindcode Mod4+Shift+$Backquote move scratchpad
bindcode Mod4+Shift+$Digit1 move container to workspace number 1
bindcode Mod4+Shift+$Digit2 move container to workspace number 2
bindcode Mod4+Shift+$Digit3 move container to workspace number 3
bindcode Mod4+Shift+$Digit4 move container to workspace number 4
bindcode Mod4+Shift+$Digit5 move container to workspace number 5
bindcode Mod4+Shift+$Digit6 move container to workspace number 6
bindcode Mod4+Shift+$Digit7 move container to workspace number 7
bindcode Mod4+Shift+$Digit8 move container to workspace number 8
bindcode Mod4+Shift+$Digit9 move container to workspace number 9
bindcode Mod4+Shift+$Digit0 move container to workspace number 10
bindcode Mod4+Shift+$Minus move container to workspace number 11
bindcode Mod4+Shift+$Equal move container to workspace number 12

# Monitors
bindcode Mod4+Mod1+$KeyH focus output left
bindcode Mod4+Mod1+$KeyJ focus output down
bindcode Mod4+Mod1+$KeyK focus output up
bindcode Mod4+Mod1+$KeyL focus output right

bindcode Mod4+Mod1+Shift+$KeyH move container to output left
bindcode Mod4+Mod1+Shift+$KeyJ move container to output down
bindcode Mod4+Mod1+Shift+$KeyK move container to output up
bindcode Mod4+Mod1+Shift+$KeyL move container to output right

bindcode Mod4+Mod1+Control+$KeyH move workspace to output left
bindcode Mod4+Mod1+Control+$KeyJ move workspace to output down
bindcode Mod4+Mod1+Control+$KeyK move workspace to output up
bindcode Mod4+Mod1+Control+$KeyL move workspace to output right

# Rename
bindcode Mod4+Shift+$KeyR exec swaymsg rename workspace to '"'$(rofi -dmenu -p 'Workspace name')'"'

# Desktop ──────────────────────────────────────────────────────────────────────

# Room
bindsym Mod4+F2 exec room

# Password manager
bindcode Mod4+$KeyP exec menu-password $(menu-password | rofi -dmenu -i -p Password) | wl-copy

# Screenshots
bindsym Print exec grim-window $(new-file).webp
bindsym Shift+Print exec grim-output $(new-file).webp

# Multimedia-keys ──────────────────────────────────────────────────────────────

bindsym XF86AudioMute exec amixer set Master toggle
bindsym XF86AudioRaiseVolume exec amixer set Master 5%+
bindsym XF86AudioLowerVolume exec amixer set Master 5%-

bindsym XF86AudioPlay exec echo cycle pause | socat - "$XDG_CONFIG_HOME/mpv/socket"
bindsym XF86AudioPause exec echo cycle pause | socat - "$XDG_CONFIG_HOME/mpv/socket"
bindsym XF86AudioNext exec echo playlist-next | socat - "$XDG_CONFIG_HOME/mpv/socket"
bindsym XF86AudioPrev exec echo playlist-prev | socat - "$XDG_CONFIG_HOME/mpv/socket"

# Rules ────────────────────────────────────────────────────────────────────────

for_window [app_id=alacritty-float] exec 640px
